(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{580:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var a={},o=function(e,t){var n;window[e]?n=a[e]:(n=a[e]=[],window[e]=function(){var e=arguments;n.forEach(function(t){t.apply(null,e)})}),n.push(t)},s=function(e,t){var n=a[e];if(n)if(t){var o=n.findIndex(function(e){return e===t});n.splice(o,1)}else n.length=0}},620:function(e,t,n){e.exports={smsHelper:"SmsHelper_smsHelper__1yUE-",textWrapper:"SmsHelper_textWrapper__1kLfb",title:"SmsHelper_title__3Zgzg",content:"SmsHelper_content__1Cl8v",block:"SmsHelper_block__2Wh7N",SmsBtn:"SmsHelper_SmsBtn__2klia",CompleteBtn:"SmsHelper_CompleteBtn__3kM9q"}},687:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return H});var a=n(34),o=n(18),s=n(19),c=n(24),i=n(22),r=n(23),l=n(0),u=n.n(l),p=n(553),m=n.n(p),d=n(193),f=n(565),b=n(55),g=n.n(b),h=n(559),_=n(580),k=n(108),v=n(549),w=n(550),C=n(620),E=n.n(C),S=!1,M="",y="",B="mac"===f.a.getQueryParams("from"),T=new h.a,O=d.a.BRIGE_CALLBACK_NAME_FOR_GET_REMAINING_TIME,H=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).goBack=function(){n.props.history.go(-1)},n.state={inMac:!1,vercodeBtnUseable:!0},n}return Object(r.a)(t,e),Object(s.a)(t,[{key:"postMessageToMac",value:function(e,t){try{B&&window.webkit.messageHandlers[e].postMessage(t)}catch(n){console.log(n)}}},{key:"remainingTimeCallback",value:function(e){console.log(e),T.startTimer({count:e,stepCallback:function(e){console.log(e)}})}},{key:"componentDidMount",value:function(){y=m.a.get("registrationSpeechAccount"),this.setState({inMac:B}),f.a.setWindowTitle(k.rb),Object(_.a)(O,this.remainingTimeCallback),this.postMessageToMac("remainingTime",{callback:O})}},{key:"closeCurPage",value:function(e){window.opener=null,window.open("","_self"),window.close(),this.postMessageToMac("closeWindow","")}},{key:"getSpeechVerCode",value:function(){var e=this;if(y&&!S){S=!0;var t,n;n=M?{sessionId:M,recipient:y,voiceotp:""}:{recipient:y,voiceotp:""},t=f.a.getSignByParam(n),g.a.get(d.a.baseUrl+"/SendOneTimePassword.action",{params:Object(a.a)({sig:t},n)}).then(function(t){if(t&&t.data&&t&&t.data.success)t.data.sessionId&&(M=t.data.sessionId,m.a.set("speechSessionId",t.data.sessionId,{expires:1/24/6}),e.postMessageToMac("sendCode",{sessionId:M,c:t.data.c||""}),e.closeCurPage());else if(t.data.errors&&t.data.errors.length>0)switch(t.data.errors[0].code){case"otp.too.often.error":Object(w.a)({content:k.Y});break;case"otp.limit.reached.error":Object(w.a)({content:k.X})}}).catch(function(e){console.log(e)}).finally(function(){S=!1})}}},{key:"componentWillUnmount",value:function(){Object(_.b)(O,this.remainingTimeCallback)}},{key:"render",value:function(){return u.a.createElement("div",{className:E.a.smsHelper},u.a.createElement("div",{className:E.a.textWrapper},u.a.createElement("div",{className:E.a.title},k.l),u.a.createElement("ol",{className:E.a.content},u.a.createElement("li",{className:E.a.block},u.a.createElement("div",null,k.D)),u.a.createElement("li",null,u.a.createElement("div",null,k.xb)))),u.a.createElement(v.a,{text:k.B,buttonWrapperClass:E.a.SmsBtn,onClick:this.getSpeechVerCode.bind(this)}),u.a.createElement(v.a,{text:k.o,buttonWrapperClass:E.a.CompleteBtn,onClick:this.goBack}))}}]),t}(l.Component)}}]);
//# sourceMappingURL=SmsHelper.63b0cdad.chunk.js.map