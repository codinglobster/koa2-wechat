{"version":3,"sources":["lark/components/LoadingIcon/index.js","lark/config/interfaceUrl.js","lark/config/pageUrl.js","lark/components/LoadingIcon/index.module.scss","lark/components/ComponentLoading/index.module.scss","lark/config/urlBaseInfo.js","lark/ga/index.js","lark/utils/routeUtils.js","lark/components/ComponentLoading/index.js","lark/config/routeMap.js","lark/routeComponents/RedirectTo/index.js","lark/AppRouter.js","lark/App.js","lark/store/reducer.js","lark/store/store.js","lark/utils/signatureUtils.js","lark/index.js","lark/config/interfaceParam.js","lark/store/actionTypes.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_index_module_scss__WEBPACK_IMPORTED_MODULE_1__","_index_module_scss__WEBPACK_IMPORTED_MODULE_1___default","LoadingIcon","a","createElement","className","styles","loadingRing","d","__webpack_exports__","REGISTRATION_CHECK","LARK_SSO_URL","LARK_VERIFY_AUTH","LARK_VERIFY_CREDENTIAL","LARK_CHECK_STATUS_BY_AUTH_TOKEN","LARK_BIND_USER_BY_AUTH_TOKEN","LARK_UNBIND_USER_BY_AUTH_TOKEN","_urlBaseInfo__WEBPACK_IMPORTED_MODULE_0__","_interfaceParam__WEBPACK_IMPORTED_MODULE_1__","_pageUrl__WEBPACK_IMPORTED_MODULE_2__","ENCODE_LARK_YX_HOME_URL","encodeURIComponent","LARK_YX_HOME_URL","concat","INTERFACE_BASE_URL","LARK_APP_ID","REACTIVATION_URL","THIRD_PARTY_PROVISION","EXTRACTED_BASE_URL","CURRENT_BASE_URL","MARKETING_WEB_BASE_URL","module","exports","loadingWrapper","extractApiHost","host","extractedApiHost","match","err","console","error","window","location","protocol","hostname","i","s","o","r","m","document","q","push","arguments","l","Date","getElementsByTagName","async","src","parentNode","insertBefore","ga","path","ComponentLoading","props","_react_16_8_5_react_default","ROUTE_MAP","title","component","_Component","RedirectTo","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","key","value","replace","Component","children","Loadable","loader","Promise","all","e","then","bind","loading","routes","pathArray","split","filter","item","length","deep","targetDeep","loopList","route","pop","find","getRouteByPath","AppRouter","Switch","map","Route","Redirect","to","App","process","REACT_APP_BASENAME","HashRouter","lark_AppRouter","initialState","bindStatus","isDialogShow","tipInfo","tip","isTipShow","reducer","newState","state","undefined","action","type","payload","actionTypes","assign","objectSpread","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","getSignatureByParam","param","sortedParamArray","sortListByKey","array","lArr","rArr","midValue","forEach","object","keyPath","_loop","obj","keys","prototype","toString","call","expandObjectToArray","paramString","reduce","preValue","_ref","toLowerCase","md5","processParam","userAgent","navigator","reqAuth","consumerKey","CONSUMER_KEY","consumerSecret","CONSUMER_SECRET","deviceId","DEVICE_ID","deviceDesc","nonce","Math","ceil","random","extendedParam","signature","credential","Base64","encode","axios","defaults","withCredentials","interceptors","request","use","config","needSignature","method","params","data","log","reject","ReactDOM","render","es","lark_App","getElementById","LARK_CHANNEL_ID","LARK_PLATFORM","SET_BIND_STATUS","SET_DIALOG_STATUS","SET_TIP_STATUS"],"mappings":"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","file":"static/js/lark.7ad8e47e.chunk.js","sourcesContent":["import React from 'react';\n\nimport styles from './index.module.scss';\n\nconst LoadingIcon = () => (\n  <div className={styles.loadingRing}>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n);\n\nexport default LoadingIcon;","import {INTERFACE_BASE_URL, DEV_PAGE_URL_ORIGIN} from './urlBaseInfo';\nimport {LARK_APP_ID} from './interfaceParam';\nimport {LARK_YX_HOME_URL} from './pageUrl';\n\nconst ENCODE_LARK_YX_HOME_URL = encodeURIComponent(LARK_YX_HOME_URL); // Lark sso 之后的 redirect_url\n\nconst REGISTRATION_CHECK = `${INTERFACE_BASE_URL}/RegistrationCheck.action`; // 帐户校验接口\nconst LARK_SSO_URL = `https://open.zjurl.cn/connect/qrconnect/page/sso/?redirect_uri=${ENCODE_LARK_YX_HOME_URL}&app_id=${LARK_APP_ID}`; // Lark - 拼接 sso 请求接口\nconst LARK_VERIFY_AUTH = `${INTERFACE_BASE_URL}/third/auth/v1/verifyLarkAuth`; // Lark - 验证 code 字段是否合法\nconst LARK_VERIFY_CREDENTIAL = `${INTERFACE_BASE_URL}/third/auth/v1/verifyCredential`; // Lark - 获取 authtoken 接口\nconst LARK_BIND_USER_BY_AUTH_TOKEN = `${INTERFACE_BASE_URL}/third/auth/v1/bindUserByAuthToken`; // Lark - 绑定接口\nconst LARK_CHECK_STATUS_BY_AUTH_TOKEN = `${INTERFACE_BASE_URL}/third/auth/v1/checkBindStatusByAuthToken`; // Lark - 检测帐户绑定状态\nconst LARK_UNBIND_USER_BY_AUTH_TOKEN = `${INTERFACE_BASE_URL}/third/auth/v1/unbindUserByAuthToken`; // Lark - 解绑接口\n\nexport {\n  REGISTRATION_CHECK,\n  LARK_SSO_URL,\n  LARK_VERIFY_AUTH,\n  LARK_VERIFY_CREDENTIAL,\n  LARK_CHECK_STATUS_BY_AUTH_TOKEN,\n  LARK_BIND_USER_BY_AUTH_TOKEN,\n  LARK_UNBIND_USER_BY_AUTH_TOKEN,\n}","import {EXTRACTED_BASE_URL, MARKETING_WEB_BASE_URL, CURRENT_BASE_URL} from './urlBaseInfo';\n\nconst REACTIVATION_URL = `${EXTRACTED_BASE_URL}/AccountReactivation.action`; // 帐户激活页\nconst LARK_YX_HOME_URL = `${CURRENT_BASE_URL}/embedded-web/lark/#/yx-home`; // Lark 的印象应用主页\nconst THIRD_PARTY_PROVISION = `${MARKETING_WEB_BASE_URL}/privacy/3rd_party_app_permissions.php`; // 第三方授权许可页面\n\nexport {\n  REACTIVATION_URL,\n  LARK_YX_HOME_URL,\n  THIRD_PARTY_PROVISION,\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadingRing\":\"LoadingIcon_loadingRing__2rbPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadingWrapper\":\"ComponentLoading_loadingWrapper__24INk\"};","function extractApiHost(host) {\n  const REG = /^(static\\.)?(.+)/;\n  let extractedApiHost;\n  try {\n    const result = host.match(REG);\n    extractedApiHost = result[2];\n  } catch (err) {\n    console.error(err);\n  }\n  return extractedApiHost;\n}\n\nconst {protocol, hostname} = window.location;\nconst IS_DEV = process.env.NODE_ENV === 'development';\nconst DEFAULT_PRODUCTION_API_HOST = 'app.yinxiang.com';\nconst DEV_PAGE_URL_ORIGIN = 'https://stage.yinxiang.com';\nconst DEV_STATIC_PAGE_URL_ORIGIN = 'https://static.stage.yinxiang.com';\nconst EXTRACTED_BASE_URL = `${IS_DEV ? DEV_PAGE_URL_ORIGIN : `${protocol}//${extractApiHost(hostname) || DEFAULT_PRODUCTION_API_HOST}`}`; // 当前页面去掉 static 的 baseurl 如果是 dev 环境下那就手动指定一个\nconst CURRENT_BASE_URL = `${IS_DEV ? DEV_STATIC_PAGE_URL_ORIGIN : `${protocol}//${hostname}`}`; // 当前页面的 baseurl 如果是 dev 环境下 同样手动指定\nconst MARKETING_WEB_BASE_URL = `${protocol}//www.yinxiang.com`; // marketing 页面的 baseurl\nconst INTERFACE_BASE_URL = `${IS_DEV ? '' : `${EXTRACTED_BASE_URL}`}`; // 接口的 baseurl\nconst EXTRACTED_DOMAIN = `${IS_DEV ? '' : extractApiHost(hostname) || DEFAULT_PRODUCTION_API_HOST}`; // 纯 domain 不带协议头\n\nexport {\n  protocol,\n  hostname,\n  EXTRACTED_BASE_URL,\n  MARKETING_WEB_BASE_URL,\n  CURRENT_BASE_URL,\n  INTERFACE_BASE_URL,\n  EXTRACTED_DOMAIN,\n  DEV_PAGE_URL_ORIGIN,\n}","/* eslint-disable */\n\n(function (i, s, o, g, r, a, m) {\n  i['GoogleAnalyticsObject'] = r;\n  i[r] = i[r] || function () {\n    (i[r].q = i[r].q || []).push(arguments)\n  }, i[r].l = 1 * new Date();\n  a = s.createElement(o),\n    m = s.getElementsByTagName(o)[0];\n  a.async = 1;\n  a.src = g;\n  m.parentNode.insertBefore(a, m)\n})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');\n\nif (window.location.hostname == 'static.app.yinxiang.com') {\n  window.ga('create', 'UA-117332876-4', 'static.app.yinxiang.com');\n} else {\n  window.ga('create', 'UA-117332876-11', 'static.preprod.yinxiang.com');\n}","import ROUTE_MAP from '../config/routeMap';\n//todo 需添加一些容错处理\n\n/**\n *\n * @param path\n * @return {{path: string, component: *, children: *[]}[]}\n */\nconst getRouteByPath = (path) => {\n  const pathArray = path.split('/').filter(item => !!item);\n  if (pathArray.length === 0) {\n    return ROUTE_MAP;\n  }\n  let deep = 0;\n  const targetDeep = pathArray.length;\n  const loopList = [ROUTE_MAP];\n\n  while (loopList.length > 0) {\n    const routes = loopList.pop();\n    const route = routes.find(item => item.path === pathArray[deep]);\n    if (!route) return;\n    deep += 1;\n    if (deep === targetDeep) {\n      return route;\n    }\n    const {children} = route;\n    if (!children) return;\n    loopList.push(children);\n  }\n};\n\nconst getSubRoutesByPath = (path) => {\n  if (path === '/') {\n    return ROUTE_MAP;\n  }\n  return getRouteByPath(path).children;\n};\n\nexport {\n  getRouteByPath,\n  getSubRoutesByPath,\n};","import React from 'react';\nimport LoadingIcon from '../LoadingIcon';\n\nimport styles from './index.module.scss';\n\nconst ComponentLoading = (props) => {\n  return (\n    <div className={styles.loadingWrapper}>\n      <LoadingIcon/>\n    </div>\n  )\n};\n\nexport default ComponentLoading;","import Loadable from 'react-loadable';\nimport ComponentLoading from '../components/ComponentLoading';\nimport RedirectTo from '../routeComponents/RedirectTo';\n\nconst LarkHome = Loadable({\n  loader: () => import('../routeComponents/LarkHome'),\n  loading: ComponentLoading,\n});\n\nconst LarkYXLogin = Loadable({\n  loader: () => import('../routeComponents/LarkYXLogin'),\n  loading: ComponentLoading,\n});\n\nconst LarkYXAuthorize = Loadable({\n  loader: () => import('../routeComponents/LarkYXAuthorize'),\n  loading: ComponentLoading,\n});\n\n\nconst ROUTE_MAP = [\n  {\n    path: 'lark-home',\n    title: 'Lark 登录',\n    component: RedirectTo,\n    children: null,\n  },\n  {\n    path: 'yx-home',\n    title: '印象笔记',\n    component: LarkHome,\n    children: null,\n  },\n  {\n    path: 'yx-login',\n    title: '登录印象笔记',\n    component: LarkYXLogin,\n    children: null,\n  },\n  {\n    path: 'yx-authorize',\n    title: '印象笔记授权',\n    component: LarkYXAuthorize,\n    children: null,\n  },\n];\n\nexport default ROUTE_MAP;","\nimport React, { Component } from \"react\";\n\nimport {LARK_SSO_URL} from '../../config/interfaceUrl';\n\nexport class RedirectTo extends Component {\n  componentDidMount(){\n    window.location.replace(LARK_SSO_URL);\n  }\n\n  render(){\n    return (\n      <div></div>\n    );\n  }\n}\n \nexport default RedirectTo;\n","import React, {Component} from 'react';\nimport {Switch, Route, Redirect} from 'react-router-dom';\nimport {getSubRoutesByPath} from './utils/routeUtils';\n\nconst routes = getSubRoutesByPath('/');\n\nclass AppRouter extends Component {\n  render() {\n    return (\n      <Switch>\n        {\n          routes.map(item => (\n            <Route path={`/${item.path}`} component={item.component} key={item.path}/>\n          ))\n        }\n        <Redirect to={`/${routes[0].path}`}/>\n      </Switch>\n    )\n  }\n}\n\nexport default AppRouter;","import React, {Component} from 'react';\nimport {HashRouter as Router} from 'react-router-dom';\nimport AppRouter from './AppRouter';\n\nimport styles from './App.module.scss';\n\nconst {REACT_APP_BASENAME} = process.env;\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <AppRouter/>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import * as actionTypes from './actionTypes';\n\nconst initialState = {\n  bindStatus: false,\n  isDialogShow: false,\n  tipInfo : {\n    tip: '',\n    isTipShow: false,\n  }\n}\n\nconst reducer = (state = initialState, action) => {\n  const {type, payload} = action;\n  let newState;\n  switch (type) {\n    case actionTypes.SET_BIND_STATUS:\n      newState = Object.assign({}, state, {bindStatus: payload});\n      break;\n    case actionTypes.SET_DIALOG_STATUS:\n      newState = Object.assign({}, state, {isDialogShow: payload});\n      break;\n    case actionTypes.SET_TIP_STATUS:\n      newState = Object.assign({}, state, {tipInfo: {...payload}});\n      break;\n    default:\n      newState = state;\n  }\n  return newState;\n};\n\nexport default reducer;","import {createStore} from 'redux';\nimport reducer from './reducer';\n\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());//第二个参数是react-redux-dev-tools 需要的配置\n\nexport default store;","import md5 from 'js-md5';\nimport {Base64} from 'js-base64';\nimport {CONSUMER_KEY, CONSUMER_SECRET, DEVICE_ID} from '../config/interfaceParam';\n\nconst expandObjectToArray = (object) => {\n  let array = [];\n  let extendedObject = Object.assign(object, {\n    keyPath: '',\n  });\n  let loopList = [extendedObject];\n  while (loopList.length > 0) {\n    const obj = loopList.pop();\n    let keyPath = obj.keyPath;\n    delete obj.keyPath;\n    Object.keys(obj).forEach((key) => {\n      const value = obj[key];\n      const path = keyPath ? `${keyPath}.${key}` : key;\n      if (Object.prototype.toString.call(value) === '[object Object]') {\n        loopList.push({\n          keyPath: path,\n          ...value,\n        });\n      } else {\n        array.push({\n          keyPath: path,\n          value,\n        });\n      }\n    });\n  }\n  return array;\n};\n\nconst sortListByKey = (array, key) => {\n  const {length} = array;\n  if (length < 2) {\n    return array;\n  }\n  let lArr = [];\n  let rArr = [];\n  const midValue = array[0];\n  array.forEach(item => {\n    if (item[key] < midValue[key]) {\n      lArr.push(item);\n    } else if (item[key] > midValue[key]) {\n      rArr.push(item);\n    }\n  });\n  return sortListByKey(lArr, key).concat([midValue]).concat(sortListByKey(rArr, key));\n};\n\nconst transformListToString = (list) => {\n  return list.reduce((preValue, {keyPath, value}) => {\n    preValue += `${keyPath.toLowerCase()}=${value}`;\n    return preValue;\n  }, '');\n};\n\nconst getSignatureByParam = (param) => {\n  const paramArray = expandObjectToArray(param);\n  const sortedParamArray = sortListByKey(paramArray, 'keyPath');\n  const paramString = transformListToString(sortedParamArray);\n  return md5(paramString);\n};\n\nconst processParam = (param) => {\n  const {navigator: {userAgent}} = window;\n  const reqAuth = {\n    consumerKey: CONSUMER_KEY,\n    consumerSecret: CONSUMER_SECRET,\n    deviceId: DEVICE_ID,\n    deviceDesc: userAgent,\n    nonce: Math.ceil(Math.random()*999999),\n  };\n  const extendedParam = Object.assign(param, {reqAuth});\n  const signature = getSignatureByParam(extendedParam);\n  const credential = Base64.encode(`${CONSUMER_KEY}:${CONSUMER_SECRET}`);\n  Object.assign(extendedParam.reqAuth, {signature});\n  Object.assign(extendedParam.reqAuth, {credential});\n  delete extendedParam.reqAuth.consumerKey;\n  delete extendedParam.reqAuth.consumerSecret;\n  return extendedParam;\n};\n\nexport {\n  getSignatureByParam,\n  processParam,\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport qs from 'query-string';\nimport {Provider} from 'react-redux';\n\nimport App from './App';\nimport store from './store/store';\nimport '@babel/polyfill';\nimport './index.scss';\nimport 'normalize.css'; //global css reset from npm\nimport './ga/index';\nimport {processParam} from './utils/signatureUtils';\n\n// axios 请求全局配置\naxios.defaults.withCredentials = true;\n// 请求拦截器 用于给所有需要签名的接口加签名\naxios.interceptors.request.use(function (config) {\n  const {needSignature, method, params, data} = config;\n  if (needSignature) {\n    if (method === 'post') {\n      config.data = processParam(data);\n    } else if (method === 'get') {\n      config.params = processParam(params);\n    }\n  }\n  return config;\n}, function (error) {\n  console.log(error);\n  return Promise.reject(error);\n});\n\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>, document.getElementById('root'));\n","\nconst DEVICE_ID = 'en-web';\nconst CONSUMER_KEY = 'en-web';\nconst CONSUMER_SECRET = '';\nconst LARK_APP_ID = 'cli_9c8628b7b3a9910b';\nconst LARK_CHANNEL_ID = 'cli_9cb6b21c523a1101';\nconst LARK_PLATFORM = 'lark';\n\nexport {\n  DEVICE_ID,\n  CONSUMER_KEY,\n  CONSUMER_SECRET,\n  LARK_APP_ID,\n  LARK_CHANNEL_ID,\n  LARK_PLATFORM,\n}","const SET_BIND_STATUS = 'SET_BIND_STATUS';\nconst SET_DIALOG_STATUS = 'SET_DIALOG_STATUS';\nconst SET_TIP_STATUS = 'SET_TIP_STATUS';\n\nexport {\n  SET_BIND_STATUS,\n  SET_DIALOG_STATUS,\n  SET_TIP_STATUS,\n}\n"],"sourceRoot":""}