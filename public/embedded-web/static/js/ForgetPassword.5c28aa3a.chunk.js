(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{601:function(e,t,a){"use strict";var n=a(14),c=a(15),o=a(21),r=a(20),s=a(115),i=a(22),p=a(0),u=a.n(p),d=a(57),l=a(725),f=a(577),v=(a(276),a(148)),h=a(114),m=a(574),g=a(602),b=a.n(g),T=v.d.DEFAULT,y=v.d.ERROR,w=v.c.ACCOUNT,O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).onBlur=function(){a.props.onBlur()},a.state={account:"",tipLevel:T,verifyTip:""},a.onFocus=a.onFocus.bind(Object(s.a)(a)),a.onChange=a.onChange.bind(Object(s.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.verifyTip,a=e.tipLevel,n=e.inputType,c=e.account,o=e.resetInput;n===w&&this.setState({verifyTip:t,tipLevel:a}),o&&this.setState({account:c})}},{key:"onFocus",value:function(){this.setState({tipLevel:T,verifyTip:""})}},{key:"onChange",value:function(e){var t=e.target.value,a=this.props.onChange;this.setState({account:t}),a(e)}},{key:"verifyInput",value:function(){var e,t,a=this,n=this.state.account,c=this.props,o=c.accountWasDisableTip,r=c.forgetCheck,s="",i="";return n?(e={identity:n,checkIdentity:""},t=Object(d.get)(m.e,{params:e}).then(function(){return Promise.reject()}).catch(function(e){var t=Object(l.a)(e,"response.status");if(e)switch(t){case 409:i=T,s="";break;case 412:i=y,s=o;break;default:i=y,s=h.s}else i=y,s=h.b;return i===T?r?Object(l.a)(e,"response.data"):n:Promise.reject(new Error(s))})):(i=y,s=h.L,t=Promise.reject(new Error(s))),t.finally(function(){a.setState({verifyTip:s,tipLevel:i})})}},{key:"render",value:function(){var e=this.state,t=e.tipLevel,a=e.verifyTip,n=e.account,c=this.props.placeHolder;return u.a.createElement("div",{className:b.a.loginAccountInput},u.a.createElement(f.a,{placeHolder:c||h.M,tipLevel:t,value:n,onFocus:this.onFocus,onChange:this.onChange,onBlur:this.onBlur},a))}}]),t}(p.Component);O.defaultProps={account:"",resetInput:!1,accountWasDisableTip:"",onChange:function(){},onBlur:function(){}},t.a=O},602:function(e,t,a){},604:function(e,t,a){"use strict";var n=a(0),c=a.n(n),o=a(114),r=a(576),s=a(579),i=a(605),p=a.n(i);t.a=function(e){var t=Object(s.a)(o.d),a=e.account;return c.a.createElement("span",null,t.map(function(e,t){var n="";switch(t){case 1:n=a;break;case 3:n=c.a.createElement("a",{className:p.a.reactivateLink,href:r.c,key:t},e);break;default:n=e}return n}))}},605:function(e,t,a){e.exports={reactivateLink:"DisableAccountTip_reactivateLink__2mLSq"}},653:function(e,t,a){e.exports={forgetPassword:"ForgetPassword_forgetPassword__1SxVn",descTitle:"ForgetPassword_descTitle__3csaV",sendMessage:"ForgetPassword_sendMessage__9BI1j",canNotGetVercodeWrapper:"ForgetPassword_canNotGetVercodeWrapper__2YAdK",resetBtn:"ForgetPassword_resetBtn__wjFfK",checkboxWrapper:"ForgetPassword_checkboxWrapper__KgQvF",passwordInputWrapper:"ForgetPassword_passwordInputWrapper__3XDgt",passwordBlock:"ForgetPassword_passwordBlock__e7PW6",linkWrapper:"ForgetPassword_linkWrapper__3QiFL",helpWrapper:"ForgetPassword_helpWrapper__3ZZuA"}},719:function(e,t,a){"use strict";a.r(t);var n=a(33),c=a(14),o=a(15),r=a(21),s=a(20),i=a(115),p=a(22),u=a(0),d=a.n(u),l=a(714),f=a(578),v=a.n(f),h=a(58),m=a(102),g=a.n(m),b=a(57),T=a(725),y=a(104),w=a(590),O=a(574),_=a(148),I=a(149),S=a(135),C=a(114),E=(a(611),a(575)),j=a(601),k=a(604),P=a(612),N=a(277),A=a(653),W=a.n(A),F=a(579),L=_.d.DEFAULT,V=_.d.ERROR,x=_.c.VERCODE,D=_.c.DEFAULT,R=(_.a.FORGET_PASSWORD,{INPUT_ACCOUNT:0,INPUT_CODE:1,INPUT_PASSWORD:2}),U="reset.password.pre.signature.error",B="validation.required.valueNotPresent",H="one.time.password.invalid",q=!1,G=!1,M=!1,K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,p=new Array(o),u=0;u<o;u++)p[u]=arguments[u];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(p)))).state={account:"",accountTipLevel:L,accountVerifyTip:"",vercode:"",vercodeTipLevel:L,vercodeVerifyTip:"",inputType:D,checked:!1,requesting:!1,resetInput:!1,resetStep:R.INPUT_ACCOUNT,phoneNumber:"",vercodeTimeRemainToSave:0,vercodeTimeRemainToGet:0},a.onAccountInputChange=function(e){var t=e.target.value;a.setState({account:t})},a.checkAccount=function(){q||(q=!0,a.refs.accountInput.verifyInput().then(function(e){var t=e.accountType,n=e.phoneNumber;"PHONENUMBER"===t?(a.saveAccountForSmsHelpPage(),a.setState({resetStep:R.INPUT_CODE,phoneNumber:n},function(){return a.refs.vercodeInput.getVercode()})):a.sendEmail()}).catch(function(e){console.log(e)}).finally(function(){q=!1}))},a.checkVercode=function(){M||(M=!0,a.refs.vercodeInput.verifyInput().then(function(e){var t=v.a.get("speechSessionId"),c={sessionId:t||a.state.smsSessionId,otp:e,timeStamp:(new Date).getTime(),recipient:a.state.account},o=w.a.getSignByParam(c);return Object(b.get)(O.d,{params:Object(n.a)({sig:o},c)})}).then(function(e){if(Object(T.a)(e,"data"))if(Object(T.a)(e,"data.success")){console.log(y.a.baseUrl,Object(T.a)(e,"data.path"));var t="https://stage-3.yinxiang.com".concat(Object(T.a)(e,"data.path"),"&targetUrl=").concat("https%3a%2f%2fopen.weixin.qq.com%2fconnect%2foauth2%2fauthorize%3fappid%3dwx9a33d01397cc5e88%26redirect_uri%3dhttp%253a%252f%252fwww.codinglobster.cn%252fembedded-web%252faccount%252findex.html%26response_type%3dcode%26scope%3dsnsapi_userinfo%26state%3dSTATE%23wechat_redirect");window.location.href=t}else{var n=Object(T.a)(e,"data.errors");if(n.length)switch(n[0].code){case U:case B:case H:a.setState({vercodeVerifyTip:C.V,vercodeTipLevel:V,inputType:x})}}}).catch(function(e){console.log(e)}).finally(function(){M=!1}))},a.verifyAccountAndPassword=function(){return Promise.resolve({account:a.state.account})},a.updateSmsSessionId=function(e){a.setState({smsSessionId:e}),v.a.set("smsSessionId",e,{expires:1/24/60}),e&&v.a.remove("speechSessionId")},a.onVercodeTimeChange=function(e){a.setState({vercodeTimeRemainToSave:e})},a.sendEmail=function(){var e=a.props.saveBindLoginInfo,t=a.state.account,n=Object(i.a)(a),c=(new Date).getTime();G||(G=!0,Object(b.get)(O.f,{params:{identifier:t,timeStamp:c,sig:g()(t+c+y.a.reqKey),dbm:"yxdbm"}}).then(function(a){Object(T.a)(a,"data")&&Object(T.a)(a,"data.success")&&(e({account:t}),Object(N.a)({content:C.C,operates:function(){return n.props.history.push("/bind-existed")}}))}).catch(function(e){console.log(e)}).finally(function(){G=!1}))},a.redirectToTwoFactorHelper=function(){a.props.history.push("/two-factor-helper")},a.redirectToCodeTips=function(){a.props.history.push("/forget-password/sms-helper")},a.inputAccount=function(){var e=a.state,t=e.account,n=e.accountTipLevel,c=e.accountVerifyTip,o=e.inputType,r=e.resetInput,s=d.a.createElement(k.a,{account:t});return d.a.createElement("div",{className:W.a.accountInputWrapper},d.a.createElement("div",{className:W.a.descTitle},C.E),d.a.createElement(j.a,{ref:"accountInput",tipLevel:n,verifyTip:c,inputType:o,account:t,accountWasDisableHooks:a.accountWasDisable,accountNotExistedHooks:a.accountNotExisted,accountWasDisableTip:s,onChange:a.onAccountInputChange,resetInput:r,forgetCheck:!0,placeHolder:C.F}),d.a.createElement(E.a,{text:C.tb,buttonWrapperClass:W.a.resetBtn,onClick:a.checkAccount,loading:M}))},a.inputVercode=function(){var e=a.state,t=e.inputType,n=e.vercodeVerifyTip,c=e.vercodeTipLevel,o=e.phoneNumber;return d.a.createElement("div",{className:W.a.inputWrapper},d.a.createElement("div",{className:W.a.sendMessage},Object(F.a)(C.g)[0]+o),d.a.createElement(P.a,{ref:"vercodeInput",verify:a.verifyAccountAndPassword,updateSmsSessionId:a.updateSmsSessionId,verifyTip:n,tipLevel:c,inputType:t,updateCountState:function(){},onVercodeTimeChange:a.onVercodeTimeChange}),d.a.createElement(E.a,{text:C.bb,buttonWrapperClass:W.a.resetBtn,onClick:a.checkVercode,loading:M}),d.a.createElement("div",{className:W.a.canNotGetVercodeWrapper},d.a.createElement(E.a,{text:C.p,buttonWrapperClass:W.a.linkWrapper,onClick:a.redirectToCodeTips})))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"saveAccountForSmsHelpPage",value:function(){var e=this.state.account;v.a.set("registrationSpeechAccount",e,{expires:1/24/60})}},{key:"render",value:function(){var e=this.state.resetStep,t=this.props.match,a=t.path,n=Object(S.a)(t.path)[0],c=R.INPUT_ACCOUNT,o=R.INPUT_CODE;return d.a.createElement("div",{className:W.a.forgetPassword},e===c&&this.inputAccount(),e===o&&this.inputVercode(),d.a.createElement("div",{className:W.a.helpWrapper},d.a.createElement(l.a,{path:"".concat(a,"/").concat(n.path),component:n.component})))}}]),t}(u.Component),J={saveBindLoginInfo:function(e){return Object(I.a)(e)}};t.default=Object(h.b)(function(e){return{bindRegistrationInfo:e.bindRegistrationInfo}},J)(K)}}]);
//# sourceMappingURL=ForgetPassword.5c28aa3a.chunk.js.map