{"version":3,"sources":["lark/utils/commonUtils.js","lark/components/Description/index.js","lark/components/Description/index.module.scss","lark/components/DownloadApp/index.module.scss","lark/routeComponents/LarkHome/index.module.scss","lark/components/DownloadApp/index.js","lark/routeComponents/LarkHome/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getUrlParams","checkDevice","key","url","window","location","href","paramsObj","replace","_len","arguments","length","arr","Array","_key","value","hasOwnProperty","decodeURIComponent","ua","navigator","userAgent","downloadInfo","match","device","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_index_module_scss__WEBPACK_IMPORTED_MODULE_1__","_index_module_scss__WEBPACK_IMPORTED_MODULE_1___default","Description","_ref","content","className","a","createElement","isArray","map","item","index","styles","describe","ele","resolveArrayItem","module","exports","downloadContainer","downloadButton","downloadPlatform","qrContent","show","downloadButtonMobile","homeContainer","brandIntro","introLeft","headerLogo","introBoldText","bindContent","bindAndAuth","bindButton","unbindButton","bindText","bindLabel","DownloadApp","state","deviceInfo","isQrShow","platform","DEFAULT_SHOW_QR","platformList","showQr","_this","setState","hideQr","getPlatformList","LARK_DOWNLOAD_PLATFORM","slice","filter","_this2","this","_this3","_this$state","_react_16_8_5_react_default","Fragment","copywritingHelper","LARK_GET_YX","LARK_DOWNLOAD_BUTTON","LARK_APP_DOWNLOAD","downloadUrl","onMouseEnter","bind","onMouseLeave","imgUrl","concat","src","alt","SCAN_DOWNLOAD_APP","ANYTIME_ACCESS_NOTES","Component","LarkHome","bindStatus","BIND_STATUS_MAP","UNBIND","authToken","isRefresh","okButtonText","okButtonType","onOkType","handleBindStatus","_this$props","props","history","setDialogStatus","refreshCode","localStorage","getItem","BIND","UNBIND_YX_MINI","DIALOG_BUTTON_TYPE","DANGER","CONFIRM_UNBIND_YX_TEXT","publicVerifyAuth","VERIFY_CODE_TYPE","REFRESH","push","handleUnbind","_this$props2","setTipStatus","setBindStatus","post","LARK_UNBIND_USER_BY_AUTH_TOKEN","LARK_PLATFORM","needSignature","then","data","code","getValue","SUCCESS_CODE","CONNECTION_INVALID_CODE","removeItem","tip","UNBIND_SUCCESS","isTipShow","console","log","COMMON_ERROR_TIPS","catch","INTERNET_ERROR_TIPS","handleExpired","type","LARK_VERIFY_AUTH","channelId","LARK_CHANNEL_ID","verificationCode","codeType","sessionId","userName","UNBIND_CODE","setItem","AUTH_INVALID_CODE","REBIND","_this$props3","isBind","prevCode","NORMAL","_this$state2","LARK_INTRODUCTION_BOLD","LARK_INTRODUCTION_LIGHT","components_DownloadApp","LARK_DESC_LABEL","BasicButton","text","LARK_UNBIND_BUTTON","LARK_RE_BIND_BUTTON","LARK_BIND_BUTTON","buttonWrapperClass","onClick","LARK_BIND_AFTER","LARK_BIND_STATUS_LABEL","LARK_BIND_DESC","BasicModal","onOk","connect","Object","objectSpread","actions"],"mappings":"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","file":"static/js/18.8efb6824.chunk.js","sourcesContent":["import React from 'react';\n\nconst transformObjectToArray = (obj) => {\n  return Object.keys(obj).map(key => obj[key]);\n};\n\nconst getUrlParams = (key, url) => {\n  url = url || window.location.href;\n  const paramsReg = /[?&]([^?&=]+)(?:=([^?&=]*))?/g;\n  const paramsObj = {};\n  url.replace(paramsReg, (...arr) => {\n    const [, key, value] = arr;\n    paramsObj[key] = value;\n  });\n  if (key) {\n    return paramsObj.hasOwnProperty(key) ? decodeURIComponent(paramsObj[key].replace(/\\+/g, ' ')) : '';\n  }\n  return paramsObj;\n}\n\nconst checkDevice = () => {\n  const ua = navigator.userAgent;\n  let downloadInfo = {};\n  if (ua.match(/(iPhone|iPod|iPad)/)) {\n    downloadInfo.device = 'iOS';\n    downloadInfo.url = 'http://a.app.qq.com/o/simple.jsp?pkgname=com.yinxiang&ckey=CK1421937581227';\n  } else if (ua.match(/Android/)) {\n    downloadInfo.device = 'Android';\n    downloadInfo.url = 'http://a.app.qq.com/o/simple.jsp?pkgname=com.yinxiang&ckey=CK1421937581227';\n  } else if (ua.match(/Windows/)) {\n    downloadInfo.device = 'Windows';\n    downloadInfo.url = 'https://cdn-dl.yinxiang.com/YXWin6/public/Evernote_lark_latest.exe';\n  } else if (ua.match(/Macintosh/)) {\n    downloadInfo.device = 'Mac';\n    downloadInfo.url = 'https://www.yinxiang.com/download/get.php?file=EvernoteMac';\n  }\n  return downloadInfo;\n}\n\nexport {\n  transformObjectToArray,\n  getUrlParams,\n  checkDevice,\n};","import React from 'react';\n\nimport styles from './index.module.scss';\n\nconst resolveArrayItem = (item) => {\n  if (Array.isArray(item)) {\n    return item.map((ele,index) => <span key={index}>{ele}</span>);\n  }\n  return item;\n}\n\nconst Description = ({content, className}) => {\n  return <div className={className}>\n            {Array.isArray(content) ?\n              content.map((item,index) => <p key={index} className={styles.describe}>{resolveArrayItem(item)}</p>) :\n              <p className={styles.describe}>{content}</p>\n            }\n         </div>\n}\n\nexport default Description;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"describe\":\"Description_describe__2xkYH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"downloadContainer\":\"DownloadApp_downloadContainer__3hZQu\",\"downloadButton\":\"DownloadApp_downloadButton__2Altv\",\"downloadPlatform\":\"DownloadApp_downloadPlatform__1jkag\",\"qrContent\":\"DownloadApp_qrContent__3Mjxq\",\"show\":\"DownloadApp_show__39DLj\",\"downloadButtonMobile\":\"DownloadApp_downloadButtonMobile__6Gy53\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeContainer\":\"LarkHome_homeContainer__OsDa0\",\"brandIntro\":\"LarkHome_brandIntro__3qPU0\",\"introLeft\":\"LarkHome_introLeft__2y9jg\",\"headerLogo\":\"LarkHome_headerLogo__3pP9L\",\"introBoldText\":\"LarkHome_introBoldText__2ZlII\",\"bindContent\":\"LarkHome_bindContent__9831x\",\"bindAndAuth\":\"LarkHome_bindAndAuth__1lLXL\",\"bindButton\":\"LarkHome_bindButton__1HpX_\",\"unbindButton\":\"LarkHome_unbindButton__3rMVy\",\"bindText\":\"LarkHome_bindText__1Iuc2\",\"bindLabel\":\"LarkHome_bindLabel__l48Gi\"};","import React, {Component} from 'react';\n\nimport Description from '../Description';\n\nimport {\n  LARK_DOWNLOAD_PLATFORM,\n  LARK_APP_DOWNLOAD,\n  LARK_DOWNLOAD_BUTTON,\n  LARK_GET_YX,\n  SCAN_DOWNLOAD_APP,\n  ANYTIME_ACCESS_NOTES,\n  DEFAULT_SHOW_QR,\n} from '../../config/copyWriting';\nimport copywritingHelper from '../../utils/copywritingHelper';\nimport {checkDevice} from '../../utils/commonUtils';\n\nimport styles from './index.module.scss';\n\nclass DownloadApp extends Component {\n  state = {\n    deviceInfo: '',\n    isQrShow: false,\n    platform: DEFAULT_SHOW_QR,\n    platformList: [],\n  }\n\n  componentDidMount() {\n    const deviceInfo = checkDevice();\n    this.setState({\n      deviceInfo,\n      isQrShow: true,\n    }, () => {\n      this.getPlatformList();\n    });\n  }\n\n  showQr = (platform) => {\n    this.setState({\n      platform,\n      isQrShow: true,\n    });\n  }\n\n  hideQr = (platform) => {\n    this.setState({\n      platform,\n      isQrShow: false,\n    });\n  }\n\n  getPlatformList = () => {\n    const {deviceInfo: {device}} = this.state;\n    let platformList = [];\n    if (device === 'iOS' || device === 'Android') {\n      platformList = LARK_DOWNLOAD_PLATFORM.slice(0, 2);\n    } else {\n      platformList = LARK_DOWNLOAD_PLATFORM.filter((item) => item.platform !== device);\n    }\n    this.setState({\n      platformList,\n    });\n  }\n\n  render() {\n    const {deviceInfo, isQrShow, platform, platformList} = this.state;\n\n    return (\n      <React.Fragment>\n        <div className={styles.downloadContainer}>\n          <Description content={copywritingHelper(LARK_GET_YX, deviceInfo.device)} />\n\n          <a href={deviceInfo.url} className={styles.downloadButton}>{LARK_DOWNLOAD_BUTTON}</a>\n\n          <p>{LARK_APP_DOWNLOAD}</p>\n          \n          <div className={styles.downloadPlatform}>\n            {platformList.map((item, index) => (\n              <a key={index} href={item.downloadUrl}>\n                <span onMouseEnter={this.showQr.bind(this, item.platform)} onMouseLeave={this.hideQr.bind(this, item.platform)}>{item.platform}</span>\n                {item.imgUrl ? \n                  <div className={`${styles.qrContent} ${(isQrShow && item.platform === platform) ? styles.show : ''}`}>\n                    <img src={item.imgUrl} alt=\"\" />\n                    <p>{SCAN_DOWNLOAD_APP}</p>\n                    <p>{ANYTIME_ACCESS_NOTES}</p>\n                  </div> : null\n                }\n              </a>\n            ))}\n          </div>\n        </div>\n\n        <a href={deviceInfo.url} className={styles.downloadButtonMobile}>{LARK_DOWNLOAD_BUTTON}</a>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default DownloadApp;\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {post} from 'axios';\nimport {get as getValue} from 'lodash-es';\n\nimport BasicButton from '../../components/BasicButton';\nimport BasicModal from '../../components/BasicModal';\nimport DownloadApp from '../../components/DownloadApp';\n\nimport {\n  LARK_INTRODUCTION_BOLD,\n  LARK_INTRODUCTION_LIGHT,\n  LARK_DESC_LABEL,\n  LARK_BIND_DESC,\n  LARK_BIND_STATUS_LABEL,\n  LARK_BIND_BUTTON,\n  LARK_BIND_AFTER,\n  LARK_UNBIND_BUTTON,\n  UNBIND_YX_MINI,\n  CONFIRM_UNBIND_YX_TEXT,\n  UNBIND_SUCCESS,\n  LARK_RE_BIND_BUTTON,\n  COMMON_ERROR_TIPS,\n  INTERNET_ERROR_TIPS,\n} from '../../config/copyWriting';\nimport {DIALOG_BUTTON_TYPE, BIND_STATUS_MAP, VERIFY_CODE_TYPE} from '../../config/propsPermittedValueMap';\nimport {getUrlParams} from '../../utils/commonUtils';\nimport copywritingHelper from '../../utils/copywritingHelper'; \nimport {LARK_CHANNEL_ID, LARK_PLATFORM} from '../../config/interfaceParam';\nimport {LARK_UNBIND_USER_BY_AUTH_TOKEN, LARK_VERIFY_AUTH} from '../../config/interfaceUrl';\nimport {SUCCESS_CODE, UNBIND_CODE, AUTH_INVALID_CODE, CONNECTION_INVALID_CODE} from '../../config/interfaceResCode';\nimport * as actions from '../../store/actions';\n\nimport styles from './index.module.scss';\n\nclass LarkHome extends Component {\n  state = {\n    bindStatus: BIND_STATUS_MAP.UNBIND,\n    authToken: '',\n    isRefresh: false, // 是否解绑后在当前页面再次绑定\n    okButtonText: '',\n    okButtonType: '',\n    content: '',\n    onOkType: '',\n  };\n\n  componentDidMount() {\n    const {history, bindStatus: isBind} = this.props;\n    const prevCode = localStorage.getItem('code') || '';\n    const code = getUrlParams('code').replace(' ', '+');\n    if (isBind) {\n      this.setState({\n        bindStatus: BIND_STATUS_MAP.BIND,\n      });\n      return;\n    }\n    if (!code || code === prevCode) {\n      history.replace('/lark-home');\n      return;\n    }\n    localStorage.setItem('code', code);\n    this.publicVerifyAuth(VERIFY_CODE_TYPE.NORMAL, code);\n  }\n\n  handleBindStatus = () => {\n    const {bindStatus, isRefresh} = this.state;\n    const {history, setDialogStatus} = this.props;\n    const refreshCode = localStorage.getItem('refreshCode');\n    if (bindStatus === BIND_STATUS_MAP.BIND) {\n      this.setState({\n        okButtonText: UNBIND_YX_MINI,\n        okButtonType: DIALOG_BUTTON_TYPE.DANGER,\n        content: CONFIRM_UNBIND_YX_TEXT,\n        onOkType: 0,\n      }, () => {\n        setDialogStatus(true);\n      });\n    } else if (bindStatus === BIND_STATUS_MAP.UNBIND){\n      if (isRefresh) { // 如果是解绑后在当前页面再次绑定则重新获取 seessionId\n        this.publicVerifyAuth(VERIFY_CODE_TYPE.REFRESH, refreshCode);\n      }\n      history.push('/yx-login');\n    } else {\n      history.push('/yx-login');\n    }\n  }\n\n  handleUnbind = () => {\n    const {setTipStatus, setBindStatus} = this.props;\n    const authToken = localStorage.getItem('authToken');\n    post(LARK_UNBIND_USER_BY_AUTH_TOKEN, {\n      authToken,\n      platform: LARK_PLATFORM,\n    }, {\n      needSignature: true,\n    }).then((data) => {\n      const code = getValue(data, 'data.code');\n      switch(code) {\n        case SUCCESS_CODE: \n        case CONNECTION_INVALID_CODE:\n          localStorage.removeItem('userName');\n          localStorage.removeItem('sessionId');\n          setTipStatus({tip: UNBIND_SUCCESS, isTipShow: true});\n          setBindStatus(false);\n          this.setState({\n            bindStatus: BIND_STATUS_MAP.UNBIND,\n            isRefresh: true,\n          });\n          break;\n        default:\n          console.log('error', code);\n          setTipStatus({tip: COMMON_ERROR_TIPS, isTipShow: true});          \n      }\n    }).catch(() => {\n      setTipStatus({tip: INTERNET_ERROR_TIPS, isTipShow: true});\n    });\n  }\n\n  handleExpired = () => {\n    const {history} = this.props;\n    history.push('/yx-login');\n  }\n\n  publicVerifyAuth = (type, code) => {\n    const {setTipStatus} = this.props;\n    post(LARK_VERIFY_AUTH, {\n      channelId: LARK_CHANNEL_ID,\n      verificationCode: code,\n      codeType: type,\n    }, {\n      needSignature: true,\n    }).then((data) => {\n      const code = getValue(data, 'data.code');\n      const sessionId = getValue(data, 'data.content.sessionId');\n      const refreshCode = getValue(data, 'data.content.refreshCode');\n      const authToken = getValue(data, 'data.content.authToken');\n      const userName = getValue(data, 'data.content.yxName');\n      switch(code) {\n        case UNBIND_CODE:\n          localStorage.setItem('sessionId', sessionId);\n          localStorage.setItem('refreshCode', refreshCode);\n          this.setState({\n            bindStatus: BIND_STATUS_MAP.UNBIND,\n          });\n          break;\n        case SUCCESS_CODE:\n          localStorage.setItem('authToken', authToken);\n          localStorage.setItem('userName', userName);\n          localStorage.setItem('refreshCode', refreshCode);\n          this.setState({\n            bindStatus: BIND_STATUS_MAP.BIND,\n            authToken,\n          });\n          break;\n        case AUTH_INVALID_CODE: \n          localStorage.setItem('sessionId', sessionId);\n          localStorage.removeItem('userName');\n          localStorage.removeItem('authToken');\n          this.setState({\n            bindStatus: BIND_STATUS_MAP.REBIND,\n          });\n          break;\n        default:\n          console.log('error', code);\n          setTipStatus({tip: COMMON_ERROR_TIPS, isTipShow: true});\n      }\n    }).catch(() => {\n      setTipStatus({tip: INTERNET_ERROR_TIPS, isTipShow: true});\n    });\n  }\n\n  render() {\n    const {bindStatus, okButtonText, okButtonType, content, onOkType} = this.state;\n    const userName = localStorage.getItem('userName');\n\n    return (\n      <React.Fragment>\n        <div className={styles.homeContainer}>\n          <div className={styles.brandIntro}>\n            <div className={styles.introLeft}>\n              <div className={styles.headerLogo}></div>\n              <p className={styles.introBoldText}>{LARK_INTRODUCTION_BOLD}</p>\n              <p>{LARK_INTRODUCTION_LIGHT}</p>\n            </div>\n            <DownloadApp />\n          </div>\n          <div className={styles.bindContent}>\n            <div className={styles.bindAndAuth}>\n              <h3>{LARK_DESC_LABEL}</h3>\n              <BasicButton text={bindStatus === BIND_STATUS_MAP.BIND ? \n                                  copywritingHelper(LARK_UNBIND_BUTTON, userName) : \n                                    (bindStatus === BIND_STATUS_MAP.REBIND ? \n                                      LARK_RE_BIND_BUTTON : \n                                      LARK_BIND_BUTTON)}\n                           buttonWrapperClass={(bindStatus !== BIND_STATUS_MAP.UNBIND) ? styles.unbindButton : styles.bindButton}\n                           onClick={this.handleBindStatus}\n              />\n              <p>{LARK_BIND_AFTER}</p>\n            </div>\n            <div className={styles.bindText}>\n              <p className={styles.bindLabel}>{LARK_BIND_STATUS_LABEL}</p>\n              {LARK_BIND_DESC.map((item, index) => (\n                <p key={index}>{item}</p>\n              ))}\n            </div>\n          </div>\n        </div>\n      <BasicModal \n        okButtonText={okButtonText}\n        okButtonType={okButtonType}\n        onOk={onOkType ? this.handleExpired : this.handleUnbind}\n        content={content}\n      />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default connect((state) => ({...state}), actions)(LarkHome);\n"],"sourceRoot":""}