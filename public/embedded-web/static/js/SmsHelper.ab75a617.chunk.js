(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{602:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var a={},s=function(e,t){var n;window[e]?n=a[e]:(n=a[e]=[],window[e]=function(){var e=arguments;n.forEach(function(t){t.apply(null,e)})}),n.push(t)},o=function(e,t){var n=a[e];if(n)if(t){var s=n.findIndex(function(e){return e===t});n.splice(s,1)}else n.length=0}},642:function(e,t,n){e.exports={smsHelper:"SmsHelper_smsHelper__1yUE-",textWrapper:"SmsHelper_textWrapper__1kLfb",title:"SmsHelper_title__3Zgzg",content:"SmsHelper_content__1Cl8v",block:"SmsHelper_block__2Wh7N",SmsBtn:"SmsHelper_SmsBtn__2klia",CompleteBtn:"SmsHelper_CompleteBtn__3kM9q"}},709:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var a=n(33),s=n(14),o=n(15),c=n(21),i=n(20),r=n(22),l=n(0),p=n.n(l),u=n(575),m=n.n(u),d=n(108),f=n(586),b=n(56),g=n.n(b),h=n(581),_=n(602),k=n(112),v=n(572),w=n(571),C=n(642),E=n.n(C),S=!1,M="",y="",T="mac"===f.a.getQueryParams("from"),B=new h.a,I=d.a.BRIGE_CALLBACK_NAME_FOR_GET_REMAINING_TIME,O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).goBack=function(){n.props.history.go(-1)},n.state={inMac:!1,vercodeBtnUseable:!0},n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"postMessageToMac",value:function(e,t){try{T&&window.webkit.messageHandlers[e].postMessage(t)}catch(n){console.log(n)}}},{key:"remainingTimeCallback",value:function(e){console.log(e),B.startTimer({count:e,stepCallback:function(e){console.log(e)}})}},{key:"componentDidMount",value:function(){y=m.a.get("registrationSpeechAccount"),this.setState({inMac:T}),f.a.setWindowTitle(k.zb),Object(_.a)(I,this.remainingTimeCallback),this.postMessageToMac("remainingTime",{callback:I})}},{key:"closeCurPage",value:function(e){window.opener=null,window.open("","_self"),window.close(),this.postMessageToMac("closeWindow","")}},{key:"getSpeechVerCode",value:function(){var e=this;if(y&&!S){S=!0;var t,n;n=M?{sessionId:M,recipient:y,voiceotp:""}:{recipient:y,voiceotp:""},t=f.a.getSignByParam(n),g.a.get(d.a.baseUrl+"/SendOneTimePassword.action",{params:Object(a.a)({sig:t},n)}).then(function(t){if(t&&t.data&&t&&t.data.success)t.data.sessionId&&(M=t.data.sessionId,m.a.set("speechSessionId",t.data.sessionId,{expires:1/24/6}),e.postMessageToMac("sendCode",{sessionId:M,c:t.data.c||""}),e.closeCurPage());else if(t.data.errors&&t.data.errors.length>0)switch(t.data.errors[0].code){case"otp.too.often.error":Object(w.a)({content:k.db});break;case"otp.limit.reached.error":Object(w.a)({content:k.cb})}}).catch(function(e){console.log(e)}).finally(function(){S=!1})}}},{key:"componentWillUnmount",value:function(){Object(_.b)(I,this.remainingTimeCallback)}},{key:"render",value:function(){return p.a.createElement("div",{className:E.a.smsHelper},p.a.createElement("div",{className:E.a.textWrapper},p.a.createElement("div",{className:E.a.title},k.p),p.a.createElement("ol",{className:E.a.content},p.a.createElement("li",{className:E.a.block},p.a.createElement("div",null,k.I)),p.a.createElement("li",null,p.a.createElement("div",null,k.Gb)))),p.a.createElement(v.a,{text:k.G,buttonWrapperClass:E.a.SmsBtn,onClick:this.getSpeechVerCode.bind(this)}),p.a.createElement(v.a,{text:k.s,buttonWrapperClass:E.a.CompleteBtn,onClick:this.goBack}))}}]),t}(l.Component)}}]);
//# sourceMappingURL=SmsHelper.ab75a617.chunk.js.map