(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{597:function(e,t,n){"use strict";var a=n(14),c=n(15),o=n(22),r=n(20),s=n(113),i=n(21),u=n(0),p=n.n(u),l=n(57),d=n(720),f=n(575),v=(n(275),n(146)),h=n(112),m=n(572),g=n(598),b=n.n(g),T=v.d.DEFAULT,y=v.d.ERROR,O=v.c.ACCOUNT,I=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(r.a)(t).call(this,e))).onBlur=function(){n.props.onBlur()},n.state={account:"",tipLevel:T,verifyTip:""},n.onFocus=n.onFocus.bind(Object(s.a)(n)),n.onChange=n.onChange.bind(Object(s.a)(n)),n}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.verifyTip,n=e.tipLevel,a=e.inputType,c=e.account,o=e.resetInput;a===O&&this.setState({verifyTip:t,tipLevel:n}),o&&this.setState({account:c})}},{key:"onFocus",value:function(){this.setState({tipLevel:T,verifyTip:""})}},{key:"onChange",value:function(e){var t=e.target.value,n=this.props.onChange;this.setState({account:t}),n(e)}},{key:"verifyInput",value:function(){var e,t,n=this,a=this.state.account,c=this.props,o=c.accountWasDisableTip,r=c.forgetCheck,s="",i="";return a?(e={identity:a,checkIdentity:""},t=Object(l.get)(m.e,{params:e}).then(function(){return Promise.reject()}).catch(function(e){var t=Object(d.a)(e,"response.status");if(e)switch(t){case 409:i=T,s="";break;case 412:i=y,s=o;break;default:i=y,s=h.s}else i=y,s=h.b;return i===T?r?Object(d.a)(e,"response.data"):a:Promise.reject(new Error(s))})):(i=y,s=h.K,t=Promise.reject(new Error(s))),t.finally(function(){n.setState({verifyTip:s,tipLevel:i})})}},{key:"render",value:function(){var e=this.state,t=e.tipLevel,n=e.verifyTip,a=e.account;return p.a.createElement("div",{className:b.a.loginAccountInput},p.a.createElement(f.a,{placeHolder:h.L,tipLevel:t,value:a,onFocus:this.onFocus,onChange:this.onChange,onBlur:this.onBlur},n))}}]),t}(u.Component);I.defaultProps={account:"",resetInput:!1,accountWasDisableTip:"",onChange:function(){},onBlur:function(){}},t.a=I},598:function(e,t,n){},600:function(e,t,n){"use strict";var a=n(0),c=n.n(a),o=n(112),r=n(574),s=n(576),i=n(601),u=n.n(i);t.a=function(e){var t=Object(s.a)(o.d),n=e.account;return c.a.createElement("span",null,t.map(function(e,t){var a="";switch(t){case 1:a=n;break;case 3:a=c.a.createElement("a",{className:u.a.reactivateLink,href:r.c,key:t},e);break;default:a=e}return a}))}},601:function(e,t,n){e.exports={reactivateLink:"DisableAccountTip_reactivateLink__2mLSq"}},649:function(e,t,n){e.exports={forgetPassword:"ForgetPassword_forgetPassword__1SxVn",descTitle:"ForgetPassword_descTitle__3csaV",sendMessage:"ForgetPassword_sendMessage__9BI1j",canNotGetVercodeWrapper:"ForgetPassword_canNotGetVercodeWrapper__2YAdK",resetBtn:"ForgetPassword_resetBtn__wjFfK",checkboxWrapper:"ForgetPassword_checkboxWrapper__KgQvF",passwordInputWrapper:"ForgetPassword_passwordInputWrapper__3XDgt",passwordBlock:"ForgetPassword_passwordBlock__e7PW6",helpBtn:"ForgetPassword_helpBtn__3VDca"}},715:function(e,t,n){"use strict";n.r(t);var a=n(33),c=n(14),o=n(15),r=n(22),s=n(20),i=n(113),u=n(21),p=n(0),l=n.n(p),d=n(578),f=n.n(d),v=n(58),h=n(103),m=n.n(h),g=n(57),b=n(720),T=n(102),y=n(588),O=n(572),I=n(146),w=n(147),S=n(135),_=n(112),j=n(607),C=n(573),E=n(597),P=n(600),k=n(608),N=n(194),A=n(649),L=n.n(A),F=n(576),V=I.d.DEFAULT,W=I.d.ERROR,D=I.c.VERCODE,B=I.c.DEFAULT,R=I.a.FORGET_PASSWORD,U={INPUT_ACCOUNT:0,INPUT_CODE:1,INPUT_PASSWORD:2},x="reset.password.pre.signature.error",H="validation.required.valueNotPresent",G="one.time.password.invalid",K=!1,q=!1,M=!1,J=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,u=new Array(o),p=0;p<o;p++)u[p]=arguments[p];return(n=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(u)))).state={account:"",accountTipLevel:V,accountVerifyTip:"",vercode:"",vercodeTipLevel:V,vercodeVerifyTip:"",inputType:B,checked:!1,requesting:!1,resetInput:!1,resetStep:U.INPUT_ACCOUNT,phoneNumber:"",vercodeTimeRemainToSave:0,vercodeTimeRemainToGet:0},n.onAccountInputChange=function(e){var t=e.target.value;n.setState({account:t})},n.checkAccount=function(){K||(K=!0,n.refs.accountInput.verifyInput().then(function(e){var t=e.accountType,a=e.phoneNumber;"PHONENUMBER"===t?(n.saveAccountForSmsHelpPage(),n.setState({resetStep:U.INPUT_CODE,phoneNumber:a},function(){return n.refs.vercodeInput.getVercode()})):n.sendEmail()}).catch(function(e){console.log(e)}).finally(function(){K=!1}))},n.checkVercode=function(){M||(M=!0,n.refs.vercodeInput.verifyInput().then(function(e){var t=f.a.get("speechSessionId"),c={sessionId:t||n.state.smsSessionId,otp:e,timeStamp:(new Date).getTime(),recipient:n.state.account},o=y.a.getSignByParam(c);return Object(g.get)(O.d,{params:Object(a.a)({sig:o},c)})}).then(function(e){if(Object(b.a)(e,"data"))if(Object(b.a)(e,"data.success"))window.location.href=T.a.baseUrl+Object(b.a)(e,"data.path");else{var t=Object(b.a)(e,"data.errors");if(t.length)switch(t[0].code){case x:case H:case G:n.setState({vercodeVerifyTip:_.U,vercodeTipLevel:W,inputType:D})}}}).catch(function(e){console.log(e)}).finally(function(){M=!1}))},n.verifyAccountAndPassword=function(){return Promise.resolve({account:n.state.account})},n.updateSmsSessionId=function(e){n.setState({smsSessionId:e}),f.a.set("smsSessionId",e,{expires:1/24/60}),e&&f.a.remove("speechSessionId")},n.onVercodeTimeChange=function(e){n.setState({vercodeTimeRemainToSave:e})},n.sendEmail=function(){var e=n.props.saveBindLoginInfo,t=n.state.account,a=Object(i.a)(n),c=(new Date).getTime();q||(q=!0,Object(g.get)(O.f,{params:{identifier:t,timeStamp:c,sig:m()(t+c+T.a.reqKey),dbm:"yxdbm"}}).then(function(n){Object(b.a)(n,"data")&&Object(b.a)(n,"data.success")&&(e({account:t}),Object(N.a)({content:_.C,operates:function(){return a.props.history.push("/bind-existed")}}))}).catch(function(e){console.log(e)}).finally(function(){q=!1}))},n.redirectToTwoFactorHelper=function(){n.props.history.push("/two-factor-helper")},n.inputAccount=function(){var e=n.state,t=e.account,a=e.accountTipLevel,c=e.accountVerifyTip,o=e.inputType,r=e.resetInput,s=l.a.createElement(P.a,{account:t});return l.a.createElement("div",{className:L.a.accountInputWrapper},l.a.createElement("div",{className:L.a.descTitle},_.E),l.a.createElement(E.a,{ref:"accountInput",tipLevel:a,verifyTip:c,inputType:o,account:t,accountWasDisableHooks:n.accountWasDisable,accountNotExistedHooks:n.accountNotExisted,accountWasDisableTip:s,onChange:n.onAccountInputChange,resetInput:r,forgetCheck:!0}),l.a.createElement(C.a,{text:_.sb,buttonWrapperClass:L.a.resetBtn,onClick:n.checkAccount,loading:M}))},n.inputVercode=function(){var e=n.state,t=e.inputType,a=e.vercodeVerifyTip,c=e.vercodeTipLevel,o=e.phoneNumber;return l.a.createElement("div",{className:L.a.inputWrapper},l.a.createElement("div",{className:L.a.sendMessage},Object(F.a)(_.g)[0]+o),l.a.createElement(k.a,{ref:"vercodeInput",verify:n.verifyAccountAndPassword,updateSmsSessionId:n.updateSmsSessionId,verifyTip:a,tipLevel:c,inputType:t,updateCountState:function(){},onVercodeTimeChange:n.onVercodeTimeChange}),l.a.createElement(C.a,{text:_.ab,buttonWrapperClass:L.a.resetBtn,onClick:n.checkVercode,loading:M}),l.a.createElement("div",{className:L.a.canNotGetVercodeWrapper},l.a.createElement(j.a,{accountCreatePurpose:R})))},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"saveAccountForSmsHelpPage",value:function(){var e=this.state.account;f.a.set("registrationSpeechAccount",e,{expires:1/24/60})}},{key:"render",value:function(){var e=this.state.resetStep,t=this.props.match;t.path,Object(S.a)(t.path);console.log(this.props),console.log(Object(S.a)(t.path));var n=U.INPUT_ACCOUNT,a=U.INPUT_CODE;return l.a.createElement("div",{className:L.a.forgetPassword},e===n&&this.inputAccount(),e===a&&this.inputVercode())}}]),t}(p.Component),Q={saveBindLoginInfo:function(e){return Object(w.a)(e)}};t.default=Object(v.b)(function(e){return{bindRegistrationInfo:e.bindRegistrationInfo}},Q)(J)}}]);
//# sourceMappingURL=ForgetPassword.20aa2a7d.chunk.js.map