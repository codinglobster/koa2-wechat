(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{607:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});var a={},s=function(e,t){var n;window[e]?n=a[e]:(n=a[e]=[],window[e]=function(){var e=arguments;n.forEach(function(t){t.apply(null,e)})}),n.push(t)},i=function(e,t){var n=a[e];if(n)if(t){var s=n.findIndex(function(e){return e===t});n.splice(s,1)}else n.length=0}},644:function(e,t,n){e.exports={smsHelper:"SmsHelper_smsHelper__1yUE-",textWrapper:"SmsHelper_textWrapper__1kLfb",title:"SmsHelper_title__3Zgzg",content:"SmsHelper_content__1Cl8v",block:"SmsHelper_block__2Wh7N",SmsBtn:"SmsHelper_SmsBtn__2klia",CompleteBtn:"SmsHelper_CompleteBtn__3kM9q"}},715:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return I});var a=n(33),s=n(14),i=n(15),c=n(21),o=n(20),l=n(22),r=n(0),u=n.n(r),p=n(578),m=n.n(p),g=n(104),d=n(590),f=n(57),h=n.n(f),k=n(585),b=n(607),_=n(113),v=n(573),C=n(575),S=(n(574),n(644)),E=n.n(S),y="",B="",w="mac"===d.a.getQueryParams("from"),M=new k.a,N=g.a.BRIGE_CALLBACK_NAME_FOR_GET_REMAINING_TIME,I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).goBack=function(){n.props.history.go(-1)},n.state={inMac:!1,vercodeBtnUseable:!0,isNetRequesting:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"postMessageToMac",value:function(e,t){try{w&&window.webkit.messageHandlers[e].postMessage(t)}catch(n){console.log(n)}}},{key:"remainingTimeCallback",value:function(e){console.log(e),M.startTimer({count:e,stepCallback:function(e){console.log(e)}})}},{key:"componentDidMount",value:function(){B=m.a.get("registrationSpeechAccount"),this.setState({inMac:w}),Object(b.a)(N,this.remainingTimeCallback),this.postMessageToMac("remainingTime",{callback:N})}},{key:"closeCurPage",value:function(){this.props.history.go(-1)}},{key:"getSpeechVerCode",value:function(){var e=this,t=this,n=this.state.isNetRequesting;if(B)if(n)this.goBack();else{this.setState({isNetRequesting:!0});var s,i;i=y?{sessionId:y,recipient:B,voiceotp:""}:{recipient:B,voiceotp:""},s=d.a.getSignByParam(i),h.a.get(v.g,{params:Object(a.a)({sig:s},i)}).then(function(t){t&&t.data&&t&&t.data.success&&t.data.sessionId&&(y=t.data.sessionId,m.a.set("speechSessionId",t.data.sessionId,{expires:1/24/6}),e.postMessageToMac("sendCode",{sessionId:y,c:t.data.c||""}))}).catch(function(e){console.log(e)}).finally(function(){t.setState({isNetRequesting:!1}),t.goBack()})}else this.goBack()}},{key:"componentWillUnmount",value:function(){Object(b.b)(N,this.remainingTimeCallback)}},{key:"render",value:function(){var e=this.state.isNetRequesting;return u.a.createElement("div",{className:E.a.smsHelper},u.a.createElement("div",{className:E.a.textWrapper},u.a.createElement("div",{className:E.a.title},_.q),u.a.createElement("ol",{className:E.a.content},u.a.createElement("li",{className:E.a.block},u.a.createElement("div",null,_.K)),u.a.createElement("li",null,u.a.createElement("div",null,_.Ib)))),u.a.createElement(C.a,{text:_.I,buttonWrapperClass:E.a.SmsBtn,onClick:this.getSpeechVerCode.bind(this),loading:e}),u.a.createElement(C.a,{text:_.t,buttonWrapperClass:E.a.CompleteBtn,onClick:this.goBack}))}}]),t}(r.Component)}}]);
//# sourceMappingURL=SmsHelper.9ea5db46.chunk.js.map