{"version":3,"sources":["account/config/const.js","account/routeComponents/AccountInfo/index.module.scss","account/assets/default_avatar.png","account/routeComponents/AccountInfo/index.jsx"],"names":["UNKNOWN","BASIC","PLUS","PREMIUM","BUSINESS","SERVICE_LEVEL_NAME","_SERVICE_LEVEL_NAME","Object","_Users_LiuXiao_workfiled_embedded_web_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","CONNECT_STATUS","NO_PROFILE_NO_OPENAPI","NO_PROFILE_SINGLE_OPENAPI","SINGLE_PROFILE_NO_OPENAPI","SINGLE_PROFILE_SINGLE_OPENAPI_SAME","SINGLE_PROFILE_SINGLE_OPENAPI_DIFFERENT","APP_NAMES","MYYXBJ","MICRO_LIST","module","exports","accountInfo","block","top","avator","alias","line","label","value","direct","desc","confirmBtn","DEFAULT_USER_NAME","AccountInfo","state","avatarurl","nickname","servicelevel","mobile","email","wxnickname","createTime","getAccountInfo","wechatSessionId","WechatUnificationService","GetConnectionStatus","then","data","status","toObject","console","log","ConnectWithProfile","Promise","resolve","GetYxUserInfo","_this","setState","_Users_LiuXiao_workfiled_embedded_web_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","catch","e","warn","openUnLoginDilog","ClyShowUnloginDialog","confirm","content","BIND_ALREADY","operates","text","CANCEL","onClick","ClyClickCancle","LOGIN","main","ClyClickLogin","redirectToServicesList","ClyClickAppAuthorization","props","history","push","changeToDefaultAvator","defaultAvator","nextProps","this","ClyEnterAccountInfoPage","_this$state","_this$state$nickname","createtime","lines","ACCOUNT_TYPE","USER_NAME","PHONE_NUMBER","EMAIL","WECHAT","REGISTE_TIME","moment","format","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","styles","concat","src","alt","onError","map","_ref","index","key","AUTHORIZE_SERVICES","Component","connect","setWechatJsReady"],"mappings":"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","file":"static/js/AccountInfo.b43a0301.chunk.js","sourcesContent":["export const LOGIN_TYPE = {\n  NORMAL: 2, // 数字与后端定义的保持一致\n  WECHAT: 3,\n};\n\nexport const DEFAULT_NICKNAME = '印象用户';\n\nexport const PLATFORM = {\n  IOS: 'ios',\n  ANDROID: 'android',\n  LIGHTBOX: 'lightbox',\n  WEB: 'web',\n};\n\nexport const WECHAT_BIND_FORCE_SWITCH = {\n  OPEN: '1',\n  CLOSE: '0',\n};\n\nconst SERVICE_LEVEL = {\n  UNKNOWN: 0,\n  BASIC: 1,\n  PLUS: 2,\n  PREMIUM: 3,\n  BUSINESS: 4,\n}\n\nconst { UNKNOWN, BASIC, PLUS, PREMIUM, BUSINESS } = SERVICE_LEVEL;\n\nexport const SERVICE_LEVEL_NAME = {\n  [UNKNOWN]: '未知',\n  [BASIC]: '印象笔记免费帐户',\n  [PLUS]: '印象笔记标准帐户',\n  [PREMIUM]: '印象笔记高级帐户',\n  [BUSINESS]: '印象笔记企业帐户',\n}\n\nexport const CONNECT_STATUS = {\n  NO_PROFILE_NO_OPENAPI: 0,\n  NO_PROFILE_SINGLE_OPENAPI: 1,\n  SINGLE_PROFILE_NO_OPENAPI: 2,\n  SINGLE_PROFILE_SINGLE_OPENAPI_SAME: 3,\n  SINGLE_PROFILE_SINGLE_OPENAPI_DIFFERENT: 4,\n}\n\nexport const APP_NAMES = {\n  MYYXBJ: '我的印象笔记',\n  MICRO_LIST: '微清单',\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accountInfo\":\"AccountInfo_accountInfo__b-cWF\",\"block\":\"AccountInfo_block__3DpV3\",\"top\":\"AccountInfo_top__U94zH\",\"avator\":\"AccountInfo_avator__2N4J_\",\"alias\":\"AccountInfo_alias__3Yu0A\",\"line\":\"AccountInfo_line__1kbio\",\"label\":\"AccountInfo_label__2VC5B\",\"value\":\"AccountInfo_value__3s8Lg\",\"direct\":\"AccountInfo_direct__1641n\",\"desc\":\"AccountInfo_desc__2VSoQ\",\"confirmBtn\":\"AccountInfo_confirmBtn__W8pWb\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAABeCAMAAACdDFNcAAACAVBMVEVHcEz////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////r6+vN09X+/v7x8fHs7Oz9/f3u7u76+vr4+Pjt7e38/Pzv7+/19fX39/f29vbz8/P5+fnO1Nb7+/vQ1dfT2NrR1tjy8vLU2NrT2Nnn6Oje4eLj5eXo6enZ3d7q6urS19nk5ebw8PDV2dvj5OXW2tvf4eLO1NXc3+DV2tvi5OTo6Onk5ubb3t/i5OXl5ufT19n09PTS19jP1dfP1Nbg4+T29/ft7u/b39/q6uvU2dre4eHl6OnZ3N7Y3N3U2dvW293m5+fz9PTf4uPl5+jb3+Dn6Onv8fHj5ufw8vLq7O3r7e7n6uvp6urg4+Pt8PHg4uPp6erX29zl5ubX2tza3d/Q1tja3d7h4+Tm5+jg5OXx8vPW2tzo6OjV2drn5+j4+fne4uPV2tzX3N3a3t/f4+T3+Pjt7/Dp6en8/f3b3uDu8PD19vbO09Xt7u7k5eXd4OHe4OHv8PHo6er5+vrY3d7Z3d/R19jP1dbu7/Dp7Ozq7e3z9fXn6urm6erp6+wCIH3mAAAAK3RSTlMAdx70r28FNfnWrv6w/RUtpvoQbsvb5zDwQCl9v/h8CXZDbYMEWiVGIvcj4lzQDwAABZ9JREFUaN61mvVf3EgYh0NLcVqkWJHiNplkkzXW2IWyWHFp0VLotde7q+t5z93d3f/Km2SzSWYzMzH6/Q0+5MnwzjvvvBKOc6je/oG+7s6Ojs7uvoH+Xu4Qdbqrp7i8DJhUVl7c03X6MNinWtvaAVHtba2n/LGP15/Mw4RIMhSLj4zEY6FkRMj/9mT9cc/wEzW1OfJoXJR5TLIYH829o7bmhCd4aVW1yg6JAZ6ogBhS31BdVeoafqSiUmEHxyls7Q3jQeUNlRVHXMFLio6qC5d5W8nqv3C0qMSFXcoVeMwBXH1BTHlBuWMLHVN8PBjlHSsaVM7CMUfwumL0t1KCd6WEhB4qrrOnDzYoSw/zLhVW/oGGQTt6UyOy+gjvQSNoBxqb2PSWZkQXeU8SEb+5hUkfQmaP8h4VRRswxOA3obVHZN6z5AhaP9U+w8jukTDvQ2HEb6Tsbx3yGUnmfUlG9mkg+yfydyHK+1QU7W8x8aza+sy1KzNL7y7NLGft/IdwfktRJGD6+/oEzOvyFMv/UXywxJ8SFMWCjIfeOwPNWjtH/1N0fssL42cR2laG0yzuQVzp83T3QdtbVHB7oPjOiGKL0KIVOj+B4j9+v1QwTbOVsuJhOssyTwW2r5Usn3xiApK0xvLOSvPuVgEQoy/+BUjWJvWJGABVpoyjGgiM4zpGwU/QD68Aqo38pAaAEJ0+B2l6g/pMCIAaPRerZS5+g4qfZC2/Np+/1Re4TVjcScwbPy5R8U8xz1a9hkd55LgJnsu9jMt8m4pfoOPHUf6p5cAolgWwkJpTyGZnITzDyN/QGnP5c6t5YwOSkWGP+MArm9uq4tsAEM3xTpcQ9oEXAWhTa492s20kc4EgKJKe9oRH1mlX6pcuAEaNfSVUId7w/CgAXQjfA0Ccic9Q8duzDHwcgJ7cFStiG47r0w8hXennmMZXLl10TWlHNpxIJKQC+hdnIVP0a1FGlxaqV8uAkPt5XiBY5jM2HW7Qly+Asl6uH6VOuqda9aQNflVfbLTwLkUpVT83AEBS3wv3+OWcWdUCJbKD4ZMADHB9+pkNBAnWeWCD38rnNqpGw/i57eO6TRdVwKppNn0sn5lpigSwK6ub6zS7PUEvMfE3tANUGKc0Y3dyHTbJ2TTLM99MIgXNxpSwdK3DFs8/e4kGf/V5gi9EcbydcZBWKfi3SK42jxunm5mDqJol5zmfENswUXxr+5hZQk6bRPz7JLoQlWWzYxrHiiHS8j8ANEnzxrEyggJDVwj4e1S8dn+oQcEIaQy9Y6WnJDo+YoQ0U0BmKG3Bf0SnC+NGQMavE5oWLPgZkaqw+TrpsXd8nn9kwV+1e0S7DLGrnKa33SSA2FWOJyIUZdwkgFgigqdRZJ2zVj970zb9ES2NwpNAos6TErXdOeYzehKIp7DWlS9fpoS0zGTWQQpbkICb9eL6K+xEZPe116dtEnBL+aDVg3OXMtCJtjfmZlnlA6n42ZpJQ+dKX32ZXvxYS7fNDHSrzDqtdCssPLNr0IsWspTCEy+bp1LQm1JT5LIZK/oXV6BXrUyRi35Ty2L6AvSu9OfEloWp4TID/ehjcsNFbxfNpnzhL8wS20V6s2sR+tN35GZXvlX3g0/8MrlVl280rvrEf09pNGptUr/4m7Q2aa7Je9vf1l6kN3m5QaVFfc0Pf5LRotYa7NmUL3pzk8144Kc9H5YZarEdbny76wX+zW3b4YY2mtlZ8nBev3IwmuG4YXWwNOmW/sy+MlgadjoWO5hwFelvOh2L6UO9iy6W/rXzoZ4+krx+y+Ete+BuJKkPVK9/aQ8/e9/1QNUYB+/fHWPCb/3oZRxsHmbfuUFJ1FZ+efiz12E2Norfvz+59juG/u3Xu3ckX6P4wg8JkvcO/vrvn38f/vngj7+lw/iQ4LF/BvH4P+Lw9wnK/6cxzRxoBkeoAAAAAElFTkSuQmCC\"","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport { \n    ACCOUNT_TYPE,\n    USER_NAME,\n    PHONE_NUMBER,\n    EMAIL,\n    WECHAT,\n    REGISTE_TIME,\n    AUTHORIZE_SERVICES,\n    CANCEL,\n    LOGIN,\n    BIND_ALREADY,\n} from '../../config/copywriting';\nimport {\n    SERVICE_LEVEL_NAME,\n} from '../../config/const';\nimport {\n    CONNECT_STATUS,\n} from '../../config/const';\nimport {\n    ClyEnterAccountInfoPage,\n    ClyClickAppAuthorization,\n    ClyShowUnloginDialog,\n    ClyClickLogin,\n    ClyClickCancle,\n} from '../../countly/countlyPoints';\nimport WechatUnificationService from '../../service/WechatUnificationService';\n\nimport confirm from '../../components/Confirm/Confirm';\n\nimport styles from './index.module.scss';\n\nimport defaultAvator from '../../assets/default_avatar.png';\n\nconst DEFAULT_USER_NAME = '-';\n\nclass AccountInfo extends Component {\n\n    state = {\n        avatarurl: '',\n        nickname: DEFAULT_USER_NAME,\n        servicelevel: '',\n        mobile: '',\n        email: '',\n        wxnickname: '',\n        createTime: '',\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const { wechatSessionId } = nextProps;\n        console.log(wechatSessionId);\n        this.getAccountInfo(wechatSessionId);\n    }\n\n    getAccountInfo = (wechatSessionId) => {\n        if (wechatSessionId) {\n            WechatUnificationService.GetConnectionStatus(wechatSessionId)\n                .then((data) => {\n                    const { status } = data.toObject();\n                    console.log(status)\n                    if (status === CONNECT_STATUS.SINGLE_PROFILE_NO_OPENAPI) {\n                        return WechatUnificationService.ConnectWithProfile(wechatSessionId)\n                    } else {\n                        return Promise.resolve();\n                    }\n                })\n                .then(() => {\n                    return WechatUnificationService.GetYxUserInfo(wechatSessionId);\n                })\n                .then((data) => {\n                    console.log(data.toObject())\n                    this.setState({ ...data.toObject() });\n                })\n                .catch((e) => {\n                    console.warn(e);\n                });\n        }\n    }\n\n    componentDidMount() { \n        const { wechatSessionId } = this.props;\n        this.getAccountInfo(wechatSessionId);\n        ClyEnterAccountInfoPage();      \n    }\n\n    openUnLoginDilog = () => {\n        ClyShowUnloginDialog();\n        confirm({\n            content: BIND_ALREADY,\n            operates: [{\n              text: CANCEL,\n              onClick: ClyClickCancle,\n            },\n            {\n              text: LOGIN,\n              main: true,\n              onClick: () => {\n                ClyClickLogin();\n                // todo change status\n              }\n            }]\n          })\n    }\n\n    redirectToServicesList = () => {\n        ClyClickAppAuthorization();\n        this.props.history.push('/service-list');\n    }\n\n    changeToDefaultAvator = () => {\n        this.setState({\n            avatarurl: defaultAvator,\n        })\n    }\n\n    render() {\n        const { avatarurl, nickname = DEFAULT_USER_NAME, servicelevel,\n                mobile, email, wxnickname, createtime,\n        } = this.state;\n        const lines = [\n            {\n                label: ACCOUNT_TYPE,\n                value: SERVICE_LEVEL_NAME[servicelevel],\n            },\n            {\n                label: USER_NAME,\n                value: nickname,\n            },\n            {\n                label: PHONE_NUMBER,\n                value: mobile,\n            },\n            {\n                label: EMAIL,\n                value: email,\n            },\n            {\n                label: WECHAT,\n                value: wxnickname,\n            },\n            {\n                label: REGISTE_TIME,\n                value: !!createtime && moment(createtime).format('YYYY-MM-DD'),\n            }\n        ];\n        return (\n            <div className={styles.accountInfo}>\n                <div className={`${styles.block} ${styles.top}`}>\n                    <div className={styles.avator}>\n                        <img src={avatarurl || defaultAvator} alt=\"\" onError={this.changeToDefaultAvator}></img>\n                    </div>\n                    <div className={styles.alias}>{nickname}</div>\n                </div>\n                <div className={styles.block}>\n                    {lines.map(({ label, value }, index) => {\n                        return (\n                            <div className={styles.line} key={index}>\n                                <div className={styles.label}>{label}</div>\n                                <div className={styles.value}>{value}</div>\n                            </div>\n                        )\n                    })}\n                </div>\n                <div className={styles.block}>\n                    <div className={styles.line} onClick={this.redirectToServicesList}>\n                        <div className={styles.label}>{AUTHORIZE_SERVICES}</div>\n                        <div className={styles.value}>\n                            <div className={styles.direct}></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        wechatSessionId: state.wechatSessionId,\n        setWechatJsReady: state.setWechatJsReady,\n    };\n};\n  \nexport default connect(\n    mapStateToProps,\n)(AccountInfo);\n"],"sourceRoot":""}