(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{580:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return r});var n={},o=function(e,t){var a;window[e]?a=n[e]:(a=n[e]=[],window[e]=function(){var e=arguments;a.forEach(function(t){t.apply(null,e)})}),a.push(t)},r=function(e,t){var a=n[e];if(a)if(t){var o=a.findIndex(function(e){return e===t});a.splice(o,1)}else a.length=0}},624:function(e,t,a){e.exports={twoFactorHelper:"TwoFactorHelper_twoFactorHelper__2LoU_",textWrapper:"TwoFactorHelper_textWrapper__2d03K",title:"TwoFactorHelper_title__1-dvS",content:"TwoFactorHelper_content__i2DLx",block:"TwoFactorHelper_block__Kkvnh",item:"TwoFactorHelper_item__QLES5",order:"TwoFactorHelper_order__3pjHo",titleSeparator:"TwoFactorHelper_titleSeparator__1jw6q",messageSeparator:"TwoFactorHelper_messageSeparator__1lpAK",backupSeparator:"TwoFactorHelper_backupSeparator__1O-Mg",messageBtn:"TwoFactorHelper_messageBtn__2MDks",useBackupBtn:"TwoFactorHelper_useBackupBtn__26yHA",completeBtn:"TwoFactorHelper_completeBtn__1_qUn"}},689:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return S});var n=a(34),o=a(190),r=a(18),c=a(19),s=a(24),l=a(22),i=a(23),p=a(0),u=a.n(p),m=a(553),d=a.n(m),_=a(193),b=a(565),g=a(55),w=a(697),f=a(559),k=a(580),v=a(108),h=a(548),E=a(557),T=a(549),B=a(550),y=a(624),C=a.n(y),H=!1,j="",F="",O="mac"===b.a.getQueryParams("from"),N=new f.a,M=_.a.BRIGE_CALLBACK_NAME_FOR_GET_REMAINING_TIME,S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).goBack=function(){a.props.history.go(-1)},a.state={inMac:!1,vercodeBtnUseable:!0},a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"postMessageToMac",value:function(e,t){try{O&&window.webkit.messageHandlers[e].postMessage(t)}catch(a){console.log(a)}}},{key:"remainingTimeCallback",value:function(e){console.log(e),N.startTimer({count:e,stepCallback:function(e){console.log(e)}})}},{key:"componentDidMount",value:function(){F="18592074084",this.setState({inMac:O}),Object(k.a)(M,this.remainingTimeCallback),this.postMessageToMac("remainingTime",{callback:M})}},{key:"closeCurPage",value:function(e){window.opener=null,window.open("","_self"),window.close(),this.postMessageToMac("closeWindow","")}},{key:"getVerCodeByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voiceotp",t=this;if(F&&!H){H=!0;var a,r=F,c=Object(o.a)({recipient:r},e,"");j&&(c=Object.assign({},c,{speechSessionId:j})),a=b.a.getSignByParam(c),Object(g.get)(h.g,{params:Object(n.a)({sig:a},c)}).then(function(e){var t=Object(w.a)(e,"data.sessionId"),a=Object(w.a)(e,"data.errors[0].code");if(t)j=t,d.a.set("speechSessionId",t,{expires:1/24/6});else if(a)switch(a){case"otp.too.often.error":Object(B.a)({content:v.Y});break;case"otp.limit.reached.error":Object(B.a)({content:v.X})}}).catch(function(e){console.log(e)}).finally(function(){H=!1,t.goBack()})}}},{key:"componentWillUnmount",value:function(){Object(k.b)(M,this.remainingTimeCallback)}},{key:"render",value:function(){return u.a.createElement("div",{className:C.a.twoFactorHelper},u.a.createElement("div",{className:C.a.textWrapper},u.a.createElement("div",{className:C.a.title},v.pb),u.a.createElement(E.a,{pure:!0,className:C.a.titleSeparator}),u.a.createElement("div",{className:C.a.content},u.a.createElement("div",{className:C.a.block},u.a.createElement("div",{className:C.a.item},u.a.createElement("div",{className:C.a.order},"1. "),u.a.createElement("div",null,v.gb)),u.a.createElement(T.a,{text:v.jb,buttonWrapperClass:C.a.messageBtn,onClick:this.getVerCodeByType.bind(this,"textotp")}),u.a.createElement(T.a,{text:v.B,buttonWrapperClass:C.a.messageBtn,onClick:this.getVerCodeByType.bind(this,"voiceotp")})),u.a.createElement(E.a,{pure:!0,className:C.a.messageSeparator}),u.a.createElement("div",{className:C.a.block},u.a.createElement("div",{className:C.a.item},u.a.createElement("div",{className:C.a.order},"2. "),u.a.createElement("div",null,v.ub))))),u.a.createElement(T.a,{text:v.tb,buttonWrapperClass:C.a.useBackupBtn,onClick:this.goBack}),u.a.createElement(E.a,{pure:!0,className:C.a.backupSeparator}),u.a.createElement(T.a,{text:v.o,buttonWrapperClass:C.a.completeBtn,onClick:this.goBack}))}}]),t}(p.Component)}}]);
//# sourceMappingURL=TwoFactorHelper.3047d871.chunk.js.map