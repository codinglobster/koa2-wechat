(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{601:function(e,t,a){"use strict";var n=a(14),c=a(15),r=a(22),o=a(20),s=a(114),i=a(21),u=a(0),p=a.n(u),l=a(58),d=a(723),f=a(576),v=(a(276),a(148)),h=a(113),m=a(574),g=a(602),T=a.n(g),b=v.d.DEFAULT,y=v.d.ERROR,O=v.c.ACCOUNT,w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).onBlur=function(){a.props.onBlur()},a.state={account:"",tipLevel:b,verifyTip:""},a.onFocus=a.onFocus.bind(Object(s.a)(a)),a.onChange=a.onChange.bind(Object(s.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.verifyTip,a=e.tipLevel,n=e.inputType,c=e.account,r=e.resetInput;n===O&&this.setState({verifyTip:t,tipLevel:a}),r&&this.setState({account:c})}},{key:"onFocus",value:function(){this.setState({tipLevel:b,verifyTip:""})}},{key:"onChange",value:function(e){var t=e.target.value,a=this.props.onChange;this.setState({account:t}),a(e)}},{key:"verifyInput",value:function(){var e,t,a=this,n=this.state.account,c=this.props,r=c.accountWasDisableTip,o=c.forgetCheck,s="",i="";return n?(e={identity:n,checkIdentity:""},t=Object(l.get)(m.e,{params:e}).then(function(){return Promise.reject()}).catch(function(e){var t=Object(d.a)(e,"response.status");if(e)switch(t){case 409:i=b,s="";break;case 412:i=y,s=r;break;default:i=y,s=h.s}else i=y,s=h.b;return i===b?o?Object(d.a)(e,"response.data"):n:Promise.reject(new Error(s))})):(i=y,s=h.L,t=Promise.reject(new Error(s))),t.finally(function(){a.setState({verifyTip:s,tipLevel:i})})}},{key:"render",value:function(){var e=this.state,t=e.tipLevel,a=e.verifyTip,n=e.account,c=this.props.placeHolder;return p.a.createElement("div",{className:T.a.loginAccountInput},p.a.createElement(f.a,{placeHolder:c||h.M,tipLevel:t,value:n,onFocus:this.onFocus,onChange:this.onChange,onBlur:this.onBlur},a))}}]),t}(u.Component);w.defaultProps={account:"",resetInput:!1,accountWasDisableTip:"",onChange:function(){},onBlur:function(){}},t.a=w},602:function(e,t,a){},604:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(113),o=a(578),s=a(579),i=a(605),u=a.n(i);t.a=function(e){var t=Object(s.a)(r.d),a=e.account;return c.a.createElement("span",null,t.map(function(e,t){var n="";switch(t){case 1:n=a;break;case 3:n=c.a.createElement("a",{className:u.a.reactivateLink,href:o.c,key:t},e);break;default:n=e}return n}))}},605:function(e,t,a){e.exports={reactivateLink:"DisableAccountTip_reactivateLink__2mLSq"}},650:function(e,t,a){e.exports={forgetPassword:"ForgetPassword_forgetPassword__1SxVn",descTitle:"ForgetPassword_descTitle__3csaV",sendMessage:"ForgetPassword_sendMessage__9BI1j",canNotGetVercodeWrapper:"ForgetPassword_canNotGetVercodeWrapper__2YAdK",resetBtn:"ForgetPassword_resetBtn__wjFfK",checkboxWrapper:"ForgetPassword_checkboxWrapper__KgQvF",passwordInputWrapper:"ForgetPassword_passwordInputWrapper__3XDgt",passwordBlock:"ForgetPassword_passwordBlock__e7PW6",linkWrapper:"ForgetPassword_linkWrapper__3QiFL",helpWrapper:"ForgetPassword_helpWrapper__3ZZuA"}},716:function(e,t,a){"use strict";a.r(t);var n=a(33),c=a(14),r=a(15),o=a(22),s=a(20),i=a(114),u=a(21),p=a(0),l=a.n(p),d=a(711),f=a(577),v=a.n(f),h=a(59),m=a(102),g=a.n(m),T=a(58),b=a(723),y=a(116),O=a(590),w=a(574),I=a(148),_=a(149),C=a(136),S=a(113),E=a(578),k=a(3),j=a(575),P=a(601),N=a(604),A=a(611),W=a(277),F=a(650),L=a.n(F),V=a(579),D=I.d.DEFAULT,R=I.d.ERROR,B=I.c.VERCODE,U=I.c.DEFAULT,x=(I.a.FORGET_PASSWORD,{INPUT_ACCOUNT:0,INPUT_CODE:1,INPUT_PASSWORD:2}),H="reset.password.pre.signature.error",G="validation.required.valueNotPresent",M="one.time.password.invalid",q=!1,K=!1,J=!1,Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,u=new Array(r),p=0;p<r;p++)u[p]=arguments[p];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(u)))).state={account:"",accountTipLevel:D,accountVerifyTip:"",vercode:"",vercodeTipLevel:D,vercodeVerifyTip:"",inputType:U,checked:!1,requesting:!1,resetInput:!1,resetStep:x.INPUT_ACCOUNT,phoneNumber:"",vercodeTimeRemainToSave:0,vercodeTimeRemainToGet:0},a.onAccountInputChange=function(e){var t=e.target.value;a.setState({account:t})},a.checkAccount=function(){q||(q=!0,a.refs.accountInput.verifyInput().then(function(e){var t=e.accountType,n=e.phoneNumber;"PHONENUMBER"===t?(a.saveAccountForSmsHelpPage(),a.setState({resetStep:x.INPUT_CODE,phoneNumber:n},function(){return a.refs.vercodeInput.getVercode()})):a.sendEmail()}).catch(function(e){console.log(e)}).finally(function(){q=!1}))},a.checkVercode=function(){J||(J=!0,a.refs.vercodeInput.verifyInput().then(function(e){var t=v.a.get("speechSessionId"),c={sessionId:t||a.state.smsSessionId,otp:e,timeStamp:(new Date).getTime(),recipient:a.state.account},r=O.a.getSignByParam(c);return Object(T.get)(w.d,{params:Object(n.a)({sig:r},c)})}).then(function(e){if(Object(b.a)(e,"data"))if(Object(b.a)(e,"data.success")){var t="".concat(k.c).concat(Object(b.a)(e,"data.path"),"&targetUrl=").concat(E.d);window.location.href=t}else{var n=Object(b.a)(e,"data.errors");if(n.length)switch(n[0].code){case H:case G:case M:a.setState({vercodeVerifyTip:S.V,vercodeTipLevel:R,inputType:B})}}}).catch(function(e){console.log(e)}).finally(function(){J=!1}))},a.verifyAccountAndPassword=function(){return Promise.resolve({account:a.state.account})},a.updateSmsSessionId=function(e){a.setState({smsSessionId:e}),v.a.set("smsSessionId",e,{expires:1/24/60}),e&&v.a.remove("speechSessionId")},a.onVercodeTimeChange=function(e){a.setState({vercodeTimeRemainToSave:e})},a.sendEmail=function(){var e=a.props.saveBindLoginInfo,t=a.state.account,n=Object(i.a)(a),c=(new Date).getTime();K||(K=!0,Object(T.get)(w.f,{params:{identifier:t,timeStamp:c,sig:g()(t+c+y.a.reqKey),dbm:"yxdbm"}}).then(function(a){Object(b.a)(a,"data")&&Object(b.a)(a,"data.success")&&(e({account:t}),Object(W.a)({content:S.C,operates:function(){return n.props.history.push("/bind-existed")}}))}).catch(function(e){console.log(e)}).finally(function(){K=!1}))},a.redirectToTwoFactorHelper=function(){a.props.history.push("/two-factor-helper")},a.redirectToCodeTips=function(){a.props.history.push("/forget-password/sms-helper")},a.inputAccount=function(){var e=a.state,t=e.account,n=e.accountTipLevel,c=e.accountVerifyTip,r=e.inputType,o=e.resetInput,s=l.a.createElement(N.a,{account:t});return l.a.createElement("div",{className:L.a.accountInputWrapper},l.a.createElement("div",{className:L.a.descTitle},S.E),l.a.createElement(P.a,{ref:"accountInput",tipLevel:n,verifyTip:c,inputType:r,account:t,accountWasDisableHooks:a.accountWasDisable,accountNotExistedHooks:a.accountNotExisted,accountWasDisableTip:s,onChange:a.onAccountInputChange,resetInput:o,forgetCheck:!0,placeHolder:S.F}),l.a.createElement(j.a,{text:S.tb,buttonWrapperClass:L.a.resetBtn,onClick:a.checkAccount,loading:J}))},a.inputVercode=function(){var e=a.state,t=e.inputType,n=e.vercodeVerifyTip,c=e.vercodeTipLevel,r=e.phoneNumber;return l.a.createElement("div",{className:L.a.inputWrapper},l.a.createElement("div",{className:L.a.sendMessage},Object(V.a)(S.g)[0]+r),l.a.createElement(A.a,{ref:"vercodeInput",verify:a.verifyAccountAndPassword,updateSmsSessionId:a.updateSmsSessionId,verifyTip:n,tipLevel:c,inputType:t,updateCountState:function(){},onVercodeTimeChange:a.onVercodeTimeChange}),l.a.createElement(j.a,{text:S.bb,buttonWrapperClass:L.a.resetBtn,onClick:a.checkVercode,loading:J}),l.a.createElement("div",{className:L.a.canNotGetVercodeWrapper},l.a.createElement(j.a,{text:S.p,buttonWrapperClass:L.a.linkWrapper,onClick:a.redirectToCodeTips})))},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"saveAccountForSmsHelpPage",value:function(){var e=this.state.account;v.a.set("registrationSpeechAccount",e,{expires:1/24/60})}},{key:"render",value:function(){var e=this.state.resetStep,t=this.props.match,a=t.path,n=Object(C.a)(t.path)[0],c=x.INPUT_ACCOUNT,r=x.INPUT_CODE;return l.a.createElement("div",{className:L.a.forgetPassword},e===c&&this.inputAccount(),e===r&&this.inputVercode(),l.a.createElement("div",{className:L.a.helpWrapper},l.a.createElement(d.a,{path:"".concat(a,"/").concat(n.path),component:n.component})))}}]),t}(p.Component),Z={saveBindLoginInfo:function(e){return Object(_.a)(e)}};t.default=Object(h.b)(function(e){return{bindRegistrationInfo:e.bindRegistrationInfo}},Z)(Q)}}]);
//# sourceMappingURL=ForgetPassword.52860476.chunk.js.map